1) –ü–µ—Ä–µ–Ω–µ—Å –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—é –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –±–ª–æ–∫ try {}.

–ë—ã–ª–æ:

``` 
export default async (args: any) => {
    const { net, address, tokens, nfts, integrations, provider = 'Pulsar' } = args;

    try {
        validateInput(STANDARD, 'balances', args);
```

–°—Ç–∞–ª–æ:

```  
export default async (args: any) => {
    try {
    const { net, address, tokens, nfts, integrations, provider = 'Pulsar' } = args;
        validateInput(STANDARD, 'balances', args);
```

2) –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª –∏ –ø–µ—Ä–µ–Ω–µ—Å –±–ª–∏–∂–µ –∫ –º–µ—Å—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, —Å–ª—É–∂–∞—â—É—é –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç
   –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

–ë—ã–ª–æ:

```  
export const getAddressActivity = async (address: string) => {
    ...
    const startTime = Date.now();
    
   logInfo(
    `${id} | ${provider.name} data-provider | (getAddressActivity) ‚¨ÜÔ∏è | requesting address activity for ${address}`,
);

    try {
        const response = await provider.getAddressActivity(address);

        logInfo(
            `${id} | ${provider.name} data-provider | (getAddressActivity) | ‚è≥: ${new Date() - startTime}ms ‚¨áÔ∏è | received address activity for ${address}`,
        );

```

–°—Ç–∞–ª–æ:

```  
export const getAddressActivity = async (address: string) => {
    ...
    try {
        const timeBeforeRequestCall = Date.now();
        const response = await provider.getAddressActivity(address);

        logInfo(
            `${id} | ${provider.name} data-provider | (getAddressActivity) | ‚è≥: ${new Date() - timeBeforeRequestCall}ms ‚¨áÔ∏è | received address activity for ${address}`,
        );

```

3) –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª –∏ –ø–µ—Ä–µ–Ω–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –±–ª–∏–∂–µ –∫ –º–µ—Å—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–ë—ã–ª–æ:

``` 
async getBalances(net: any, address: any, options: any) {
        const result = {
            tokens: [],
            nfts: [],
            integrations: [],
        };

        const request = this.getAccountRequest({ networks: net, owner: address }, this.apiKey);

        const response = await this.requestManager.send(request);

        if (options.tokens === true) {
            const tokensBalances = response.balances.filter((token: any) => token?.platform === 'basic');
            result.tokens = result.tokens.concat(tokensBalances);
        }
```

–°—Ç–∞–ª–æ:

``` 
async getBalances(net: any, address: any, options: any) {
        ...
        const addressBalance = {
            tokens: [],
            nfts: [],
            integrations: [],
        };
        if (options.tokens === true) {
            const tokensBalances = response.balances.filter((token: any) => token?.platform === 'basic');
            addressBalance.tokens = addressBalance.tokens.concat(tokensBalances);
        }
```

4) –ü–µ—Ä–µ–Ω–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –±–ª–∏–∂–µ –∫ –º–µ—Å—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–ë—ã–ª–æ:

``` 
async getWalletBalances(net: any, address: any, options: any) {
        const network = this.checkNetwork(net);

        const cacheKey = this.getCacheKey('balances', [network, address]);

        if (!process.env.PORTAL_API_KEY) {
            logWarn(`| ${this.name} data-provider: | API key was expired`, '\n');
            // ! Register error in sentry
            this.captureSentryException(ERROR_CODES.API_KEY_EXPIRED);
            throw { code: ERROR_CODES.API_KEY_EXPIRED };
        }

        try {
            logInfo(`${this.name} data provider request params for ${network}:${address} ${JSON.stringify(options)}`);

            const balances = await this.getBalances(network, address, options);
            await this.saveBalancesToCache(cacheKey, balances, options);
```

–°—Ç–∞–ª–æ:

``` 
async getWalletBalances(net: any, address: any, options: any) {
    ...
    const cacheKey = this.getCacheKey('balances', [network, address]);
    try {
        logInfo(`${this.name} data provider request params for ${network}:${address} ${JSON.stringify(options)}`);
    
        const balances = await this.getBalances(network, address, options);
        await this.saveBalancesToCache(cacheKey, balances, options);
```

5) –ò–∑–º–µ–Ω–∏–ª –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞ c default –Ω–∞ private –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π instance –∫–ª–∞—Å—Å–∞ Alchemy.

–°—Ç–∞–ª–æ:

```
export default class Alchemy extends ProviderBaseClass {
    constructor() {
    ...
    }
    private static instance: null | Alchemy = null;
```

6) –ò–∑–º–µ–Ω–∏–ª –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞ c default –Ω–∞ private –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π config –∫–ª–∞—Å—Å–∞ Alchemy.

–°—Ç–∞–ª–æ:

```
export default class Alchemy extends ProviderBaseClass {
    constructor() {
    ...
    }
    private config: any;
```

7) –ü–µ—Ä–µ–Ω–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –±–ª–∏–∂–µ –∫ –º–µ—Å—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–ë—ã–ª–æ:

``` 
    async buildBridgeTransaction(...) {
        try {
            ...
            const amountParsed = parseUnits(amount, fromToken.decimals).toString();
            const formattedOwners = await this.utils.formatOwners(ownerAddresses);
            ...
            // some code
            ...
            const res = await this.requestManager.send(
                getMessages(
                    fromChain.chain_id,
                    toChain.chain_id,
                    fromToken.denom,
                    toToken.denom,
                    amountParsed,
                    formattedOwners,
                    slippage.toString(),
                ),
            );

```

–°—Ç–∞–ª–æ:

``` 
    async buildBridgeTransaction(...) {
        try {
            ...
            const amountParsed = parseUnits(amount, fromToken.decimals).toString();
            const formattedOwners = await this.utils.formatOwners(ownerAddresses);

            const res = await this.requestManager.send(
                getMessages(
                    fromChain.chain_id,
                    toChain.chain_id,
                    fromToken.denom,
                    toToken.denom,
                    amountParsed,
                    formattedOwners,
                    slippage.toString(),
                ),
            );

```

8) –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ networksConfigs –∏ cosmosNetworks –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –±–ª–∏–∂–µ –∫ —Ü–∏–∫–ª—É, –≤ –∫–æ—Ç–æ—Ä–æ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

–°—Ç–∞–ª–æ:

```  
.get('/cosmos/all', async (req, res) => {
    ...
    const networksConfigs = {};
    const cosmosNetworks = getCosmosNetworks();
    for (const name in cosmosNetworks) {
        ...
    }
```

9) –ü–µ—Ä–µ–Ω–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –±–ª–∏–∂–µ –∫ –º–µ—Å—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–ë—ã–ª–æ:

```
		const shortName = networkName.replace('cosmos_network_', '');
		...
		// some code
		...
		const network = configs[shortName] ? configs[shortName] : new cosmosPrototype(shortName, { net: shortName });
```

–°—Ç–∞–ª–æ:

```    
		const shortName = networkName.replace('cosmos_network_', '');
		const network = configs[shortName] ? configs[shortName] : new cosmosPrototype(shortName, { net: shortName });
```

10) –ü–µ—Ä–µ–Ω–µ—Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É REMOVE_KEYS –∏–∑ —É—Ä–æ–≤–Ω—è –º–æ–¥—É–ª—è –≤–Ω—É—Ç—Ä—å –º–µ—Ç–æ–¥–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

–ë—ã–ª–æ:

```  
const REMOVE_KEYS = [ 'value', 'currency', 'symbol', 'contractAddress', 'tokenBalance', 'parserPriority', 'coingecko_id' ];

exports.setTokenPriceInfo = (token = {}, priceInfo = {}, fromConfig = {}) => {
	...
```

–°—Ç–∞–ª–æ:

```     
exports.setTokenPriceInfo = (token = {}, priceInfo = {}, fromConfig = {}) => {
    const REMOVE_KEYS = [ 'value', 'currency', 'symbol', 'contractAddress', 'tokenBalance', 'parserPriority', 'coingecko_id' ];
	...
```

11) –ü–µ—Ä–µ–ø–∏—Å–∞–ª –º–µ—Ç–æ–¥ notifyTelegram —É–±—Ä–∞–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é message.

–ë—ã–ª–æ:

``` 
const notifyTelegram = async (failedScriptCount: string | null) => {
    // Generate test report
    let message = '';
    console.log('>>> failScriptCount:', failedScriptCount);

    if (failedScriptCount === '0') return; // no send tg

    if (!failedScriptCount) message = `üö® Alarm!!!\nError by parsing script result!\nWallet: ${getTestVar(TEST_CONST.SATORI_ADDRESS)}`;
    else message = `üö® Alarm!!!\nFail ${failedScriptCount} satori script!\nWallet: ${getTestVar(TEST_CONST.SATORI_ADDRESS)}`;

    // Send message to telegram
    await sendToTelegram(message);
};
```

–°—Ç–∞–ª–æ:

```
const notifyTelegram = async (CountFailedScript: string | null) => {
    console.log('>>> failScriptCount:', CountFailedScript);

    if (!CountFailedScript) {
        await sendToTelegram(`üö® Alarm!!!\nError by parsing script result!\nWallet: ${getTestVar(TEST_CONST.SATORI_ADDRESS)}`);
        return;
    }

    if (CountFailedScript === '0') return;

    await sendToTelegram(`üö® Alarm!!!\nFail ${CountFailedScript} satori script!\nWallet: ${getTestVar(TEST_CONST.SATORI_ADDRESS)}`);
};
```

12) –ü–µ—Ä–µ–Ω–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é SATORI_SEED –±–ª–∏–∂–µ –∫ –º–µ—Å—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –æ–≥—Ä–∞–Ω–∏—á–∏–≤ –µ–µ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏

–ë—ã–ª–æ:

```
const SATORI_SEED = getTestVar(TEST_CONST.SATORI_SEED);

export const testMetaMask = base.extend<{
    context: BrowserContext;
    satoriPage: SatoriMainPage;
}>({
    context: async ({}, use) => {
    ...
    satoriPage: async ({ browser, context, page }, use) => {
        await addWalletToMm(context, SATORI_SEED);
    ...
```

–°—Ç–∞–ª–æ:

```
    ...
    satoriPage: async ({ browser, context, page }, use) => {
        const SATORI_SEED = getTestVar(TEST_CONST.SATORI_SEED);
        await addWalletToMm(context, SATORI_SEED);
    ...
```

13) –°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–ª –∫–æ–º–∞–Ω–¥—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –Ω–∞ —Å–∞–π—Ç–µ –≤ –æ–¥–∏–Ω –º–µ—Ç–æ–¥

–ë—ã–ª–æ:

```
testMetaMask('Deposit', async ({ context, satoriPage }) => {
    await satoriPage.authByMm();
    await addNewNetAndAcceptMm(context);

    await satoriPage.page.locator('i.el-notification__closeBtn').click();
    await satoriPage.page.locator('div.user-box').click();
    await satoriPage.page.getByRole('button', { name: 'Deposit' }).click();

    await sleep(7000);

    await satoriPage.page.locator('span.max-btn').click();
    await satoriPage.page.getByRole('button', { name: 'Confirm' }).click();
```

–°—Ç–∞–ª–æ:

```
testMetaMask('Deposit', async ({ context, satoriPage }) => {
    await satoriPage.authByMm();
    await addNewNetAndAcceptMm(context);

    await satoriPage.confitmLogin();
```

14) –ü–µ—Ä–µ–Ω–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é metaMaskId –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª—è –≤ –ø—Ä–∏–≤–∞—Ç–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∫–ª–∞—Å—Å–∞.

–ë—ã–ª–æ:

```   
metaMaskId = getTestVar(TEST_CONST.MM_ID);
...
class MetaMaskHomePage {
    readonly page: Page;

    constructor(page: Page) {
        this.page = page;
    }

    async goto() {
        await this.page.goto(`chrome-extension://${metaMaskId}/home.html`);
    }
```

–°—Ç–∞–ª–æ:

```
class MetaMaskHomePage {
    readonly page: Page;
    private metaMaskId = getTestVar(TEST_CONST.MM_ID);

    constructor(page: Page) {
        this.page = page;
    }

    async goto() {
        await this.page.goto(`chrome-extension://${this.metaMaskId}/home.html`);
    }

    async goToWelcome() {
        await this.page.goto(`chrome-extension://${this.metaMaskId}/home.html#onboarding/welcome`);
    }

```

15) –°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–ª –≤—ã–∑–æ–≤—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö seed —Ñ—Ä–∞–∑—ã –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ setSeedPhrase.

–ë—ã–ª–æ:

``` 
   async addWallet(seed: string) {
        ... 
        await this.page.click('[data-testid="import-srp-confirm"]');
        await this.page.fill('input[data-testid=create-password-new]', password);
        await this.page.fill('input[data-testid=create-password-confirm]', password);
        await this.page.locator('input[data-testid=create-password-terms]').click();
        await this.page.click('[data-testid="create-password-import"]');
        await this.page.click('[data-testid="onboarding-complete-done"]');
        await this.page.click('[data-testid="pin-extension-next"]');
        await this.page.click('[data-testid="pin-extension-done"]');
    }
```

–°—Ç–∞–ª–æ:

``` 
   async addWallet(seed: string) {
        ... 
        await this.setSeedPhrase(password)
    }
```